otk.define.common:
  source_epoch: 1715673600
  # called "modification" by convention but we could/should add policy around it to disallow "user"
  # modifications outside of "modfication.*"
  # TODO: we probably want a common-common.yaml or modification.yaml with otk.include
  modfication:
    keymap: "us"
    chrony:
      servers:
        hostname: "168.254.169.123"
        minpoll: 4
        maxpoll: 4
        iburst: true
        prefer: true
      leapsectz: ""
  cloud_init_user: "ec2-user"
  kernel_opts_list:
    - "console=tty0"
    - "console=ttyS0,115200n8"
    - "net.ifnames=0"
  packages:
    build:
      otk.external.osbuild_depsolve_dnf4_defines:
        architecture: ${architecture}
        releasever: ${version}
        module_platform_id: "platform:el${version}"
        docs: false
        weak: true
        packages:
          include:
            # duplicated entries can be removed
            # only added due to functionality of the current implementation
            - "coreutils"
            - "dosfstools"
            - "glibc"
            - "grub2-pc"
            - "platform-python"
            - "policycoreutils"
            - "python3"
            - "python3-pyyaml"
            - "qemu-img"   # only needed for the qcow pipeline but for simplicity have a common buildroot
            - "rpm"
            - "selinux-policy-targeted"
            - "systemd"
            - "xfsprogs"  # conditionally added depending on the target filesystem
            - "xz"
          exclude: []
        repositories:
          - id: baseos
            baseurl: https://rpmrepo.osbuild.org/v2/mirror/public/el${version}/cs${version}-${architecture}-baseos-20230202/
          - id: appstream
            baseurl: https://rpmrepo.osbuild.org/v2/mirror/public/el${version}/cs${version}-${architecture}-appstream-20230202/
        gpgkeys:
          - "-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v2.0.22 (GNU/Linux)\n\nmQINBFzMWxkBEADHrskpBgN9OphmhRkc7P/YrsAGSvvl7kfu+e9KAaU6f5MeAVyn\nrIoM43syyGkgFyWgjZM8/rur7EMPY2yt+2q/1ZfLVCRn9856JqTIq0XRpDUe4nKQ\n8BlA7wDVZoSDxUZkSuTIyExbDf0cpw89Tcf62Mxmi8jh74vRlPy1PgjWL5494b3X\n5fxDidH4bqPZyxTBqPrUFuo+EfUVEqiGF94Ppq6ZUvrBGOVo1V1+Ifm9CGEK597c\naevcGc1RFlgxIgN84UpuDjPR9/zSndwJ7XsXYvZ6HXcKGagRKsfYDWGPkA5cOL/e\nf+yObOnC43yPUvpggQ4KaNJ6+SMTZOKikM8yciyBwLqwrjo8FlJgkv8Vfag/2UR7\nJINbyqHHoLUhQ2m6HXSwK4YjtwidF9EUkaBZWrrskYR3IRZLXlWqeOi/+ezYOW0m\nvufrkcvsh+TKlVVnuwmEPjJ8mwUSpsLdfPJo1DHsd8FS03SCKPaXFdD7ePfEjiYk\nnHpQaKE01aWVSLUiygn7F7rYemGqV9Vt7tBw5pz0vqSC72a5E3zFzIIuHx6aANry\nGat3aqU3qtBXOrA/dPkX9cWE+UR5wo/A2UdKJZLlGhM2WRJ3ltmGT48V9CeS6N9Y\nm4CKdzvg7EWjlTlFrd/8WJ2KoqOE9leDPeXRPncubJfJ6LLIHyG09h9kKQARAQAB\ntDpDZW50T1MgKENlbnRPUyBPZmZpY2lhbCBTaWduaW5nIEtleSkgPHNlY3VyaXR5\nQGNlbnRvcy5vcmc+iQI3BBMBCAAhAhsDBgsJCAcDAgYVCAIJCgsDFgIBAh4BAheA\nBQJczFsaAAoJEAW1VbOEg8ZdvOgQAMFTGIQokADy5+CynFKjfO7R0VVpJxmYGVr1\nTjnKaHmjxnJaYqoha9ukGgmLu0r+lJ42Kk6nREk1vlxfRAfiWd00Zkm+K3IMq1/D\nE0heC2vX8qqjsLJs3jzq0hgNvo9X0uHDaA4J1BHsD8sE5in/f4SivjbngvFovRGU\n1XLNCgoqpFNcROP18LqKUw8WtqgWdnYBa5i6D5qx+WMRX0NHNwcCMy1lz+sTFxIU\n9mW6cLsMaacPGD8pUXIVli8P9Vlv3jBk1wFIqRgQPW01ph/3bM7pf9hyM9FAfU4X\nAFcyb1oYI4/82EkICUe6jeuZrz67dPeLVAlYrGW4hp/825g0fqJHxPDp25GS4rAa\n4RqyibLzNjSGdXYeLj2NcB/8OqaP+T1hv3JDaqe70QoYa/GIC4rh15NyXVbUP+LG\nV4vUiL7mb9ynzvF5zYHJbcg4R7dOsiZHrMFwy7FZesQaVrXeJlxRcEj65rpm1ZtZ\nmwAE1k2LsRkvLyr9hpZkXnMeOKYIPwpdmBjXNVNVbq7097OxZOYPPos+iZKMWfl4\nUQnMsCVxonZtamdI4qEc3jMkSZPJKgOplGOms5jdY+EdSvsFWEQ0Snd3dChfU7DV\no4Rbcy5klwHrvuZIOLaovhyxuRPhP6gV9+gzpTK/7vrvDlFbbZE6s212mDZ13RWB\nmTfAxz4h\n=agO/\n-----END PGP PUBLIC KEY BLOCK-----\n"
    os:
      otk.external.osbuild_depsolve_dnf4_defines:
        architecture: ${architecture}
        releasever: ${version}
        module_platform_id: "platform:el${version}"
        docs: false
        weak: true
        packages:
          include:
            - "@core"
            - "NetworkManager-cloud-setup"
            - "authselect-compat"
            - "chrony"
            - "cloud-init"
            - "cloud-utils-growpart"
            - "dhcp-client"
            - "dosfstools"
            - "dracut-config-generic"
            - "efibootmgr"
            - "gdisk"
            - "grub2"
            - "grub2-efi-x64"
            - "grub2-pc"
            - "kernel"
            - "langpacks-en"
            - "redhat-release"
            - "redhat-release-eula"
            - "rsync"
            - "selinux-policy-targeted"
            - "shim-x64"
            - "tar"
            - "tuned"
            - "xfsprogs"
            - "yum-utils"
            - "dracut-config-generic"
          exclude:
            - "aic94xx-firmware"
            - "alsa-firmware"
            - "alsa-tools-firmware"
            - "biosdevname"
            - "dracut-config-rescue"
            - "firewalld"
            - "iprutils"
            - "ivtv-firmware"
            - "iwl100-firmware"
            - "iwl1000-firmware"
            - "iwl105-firmware"
            - "iwl135-firmware"
            - "iwl2000-firmware"
            - "iwl2030-firmware"
            - "iwl3160-firmware"
            - "iwl3945-firmware"
            - "iwl4965-firmware"
            - "iwl5000-firmware"
            - "iwl5150-firmware"
            - "iwl6000-firmware"
            - "iwl6000g2a-firmware"
            - "iwl6000g2b-firmware"
            - "iwl6050-firmware"
            - "iwl7260-firmware"
            - "libertas-sd8686-firmware"
            - "libertas-sd8787-firmware"
            - "libertas-usb8388-firmware"
            - "plymouth"
            - "qemu-guest-agent"
        repositories:
          - id: baseos
            baseurl: https://rpmrepo.osbuild.org/v2/mirror/public/el${version}/cs${version}-${architecture}-baseos-20230202/
          - id: appstream
            baseurl: https://rpmrepo.osbuild.org/v2/mirror/public/el${version}/cs${version}-${architecture}-appstream-20230202/
        gpgkeys:
          - "-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v2.0.22 (GNU/Linux)\n\nmQINBFzMWxkBEADHrskpBgN9OphmhRkc7P/YrsAGSvvl7kfu+e9KAaU6f5MeAVyn\nrIoM43syyGkgFyWgjZM8/rur7EMPY2yt+2q/1ZfLVCRn9856JqTIq0XRpDUe4nKQ\n8BlA7wDVZoSDxUZkSuTIyExbDf0cpw89Tcf62Mxmi8jh74vRlPy1PgjWL5494b3X\n5fxDidH4bqPZyxTBqPrUFuo+EfUVEqiGF94Ppq6ZUvrBGOVo1V1+Ifm9CGEK597c\naevcGc1RFlgxIgN84UpuDjPR9/zSndwJ7XsXYvZ6HXcKGagRKsfYDWGPkA5cOL/e\nf+yObOnC43yPUvpggQ4KaNJ6+SMTZOKikM8yciyBwLqwrjo8FlJgkv8Vfag/2UR7\nJINbyqHHoLUhQ2m6HXSwK4YjtwidF9EUkaBZWrrskYR3IRZLXlWqeOi/+ezYOW0m\nvufrkcvsh+TKlVVnuwmEPjJ8mwUSpsLdfPJo1DHsd8FS03SCKPaXFdD7ePfEjiYk\nnHpQaKE01aWVSLUiygn7F7rYemGqV9Vt7tBw5pz0vqSC72a5E3zFzIIuHx6aANry\nGat3aqU3qtBXOrA/dPkX9cWE+UR5wo/A2UdKJZLlGhM2WRJ3ltmGT48V9CeS6N9Y\nm4CKdzvg7EWjlTlFrd/8WJ2KoqOE9leDPeXRPncubJfJ6LLIHyG09h9kKQARAQAB\ntDpDZW50T1MgKENlbnRPUyBPZmZpY2lhbCBTaWduaW5nIEtleSkgPHNlY3VyaXR5\nQGNlbnRvcy5vcmc+iQI3BBMBCAAhAhsDBgsJCAcDAgYVCAIJCgsDFgIBAh4BAheA\nBQJczFsaAAoJEAW1VbOEg8ZdvOgQAMFTGIQokADy5+CynFKjfO7R0VVpJxmYGVr1\nTjnKaHmjxnJaYqoha9ukGgmLu0r+lJ42Kk6nREk1vlxfRAfiWd00Zkm+K3IMq1/D\nE0heC2vX8qqjsLJs3jzq0hgNvo9X0uHDaA4J1BHsD8sE5in/f4SivjbngvFovRGU\n1XLNCgoqpFNcROP18LqKUw8WtqgWdnYBa5i6D5qx+WMRX0NHNwcCMy1lz+sTFxIU\n9mW6cLsMaacPGD8pUXIVli8P9Vlv3jBk1wFIqRgQPW01ph/3bM7pf9hyM9FAfU4X\nAFcyb1oYI4/82EkICUe6jeuZrz67dPeLVAlYrGW4hp/825g0fqJHxPDp25GS4rAa\n4RqyibLzNjSGdXYeLj2NcB/8OqaP+T1hv3JDaqe70QoYa/GIC4rh15NyXVbUP+LG\nV4vUiL7mb9ynzvF5zYHJbcg4R7dOsiZHrMFwy7FZesQaVrXeJlxRcEj65rpm1ZtZ\nmwAE1k2LsRkvLyr9hpZkXnMeOKYIPwpdmBjXNVNVbq7097OxZOYPPos+iZKMWfl4\nUQnMsCVxonZtamdI4qEc3jMkSZPJKgOplGOms5jdY+EdSvsFWEQ0Snd3dChfU7DV\no4Rbcy5klwHrvuZIOLaovhyxuRPhP6gV9+gzpTK/7vrvDlFbbZE6s212mDZ13RWB\nmTfAxz4h\n=agO/\n-----END PGP PUBLIC KEY BLOCK-----\n"
