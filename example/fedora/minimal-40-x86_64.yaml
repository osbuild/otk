otk.version: 1

otk.define:
  version: 40
  architecture: "aarch64"
  packages:
    # These packages are used in the buildroot
    root:
      docs: false
      weak: false
      packages:
        include:
          - "@core"
        # TODO We can't merge nonexistent vars
        exclude:
          - "nonexistent"
    # These packages are used for the operating system tree which is what ends
    # up in the outputs.
    tree:
      docs: false
      weak: false
      packages:
        include:
          - "@core"
          - "initial-setup"
          - "libxkbcommon"
          - "NetworkManager-wifi"
          - "brcmfmac-firmware"
          - "realtek-firmware"
          - "iwlwifi-mvm-firmware"
        # TODO We can't merge nonexistent vars
        exclude:
          - "nonexistent"
    todo:
      packages:
        include:
          - "@bar"
          - "@baz"
        # TODO We can't merge nonexistent vars
        exclude:
          - "nonexistent"
    # Repositories to fetch packages from
    repositories:
      otk.include: repository/${version}.yaml
    # GPG keys to verify packages with
    keys:
      otk.include: repository/${version}-gpg.yaml
  filesystem:
    root:
      uuid: 6e4ff95f-f662-45ee-a82a-bdf44a2d0b75
      vfs_type: ext4
      path: /
      options: defaults
    boot:
      uuid: 0194fdc2-fa2f-4cc0-81d3-ff12045b73c8
      vfs_type: ext4
      path: /boot
      options: defaults
    boot-efi:
      uuid: 7B77-95E7
      vfs_type: vfat
      path: /boot/efi
      options: defaults,uid=0,gid=0,umask=077,shortname=winnt
      passno: 2

otk.target.osbuild:
  pipelines:
    - otk.include: "osbuild/root.yaml"
    - otk.include: "osbuild/pipeline/tree.yaml"
    - otk.include: "osbuild/pipeline/raw.yaml"
    - otk.include: "osbuild/pipeline/xz.yaml"
